{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Image-Watermarker/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Button, Grid, Typography, Container, Box, Paper, Input } from '@mui/material';\nimport JSZip from 'jszip';\nimport { saveAs } from 'file-saver';\n\nconst HomePage = () => {\n  const [images, setImages] = useState<File[]>([]);\n  const [watermark, setWatermark] = useState<File | null>(null);\n  const [watermarkedImages, setWatermarkedImages] = useState<string[]>([]);\n\n  // Handle image upload\n  const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files) {\n      setImages(Array.from(event.target.files));\n    }\n  };\n\n  // Handle watermark upload\n  const handleWatermarkUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files) {\n      setWatermark(event.target.files[0]);\n    }\n  };\n\n  // Check if the image is portrait or landscape\n  const getImageOrientation = (image: HTMLImageElement) => {\n    return image.width > image.height ? 'landscape' : 'portrait';\n  };\n\n  // Apply watermark to image using Canvas\n  const applyWatermark = (imageFile: File, watermarkFile: File) => {\n    return new Promise<string>((resolve, reject) => {\n      const image = new Image();\n      const reader = new FileReader();\n      reader.onload = () => {\n        image.src = reader.result as string;\n      };\n      reader.readAsDataURL(imageFile);\n\n      image.onload = () => {\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return reject('Canvas context not found');\n\n        const imageOrientation = getImageOrientation(image);\n        const watermarkImage = new Image();\n        const watermarkReader = new FileReader();\n        watermarkReader.onload = () => {\n          watermarkImage.src = watermarkReader.result as string;\n        };\n        watermarkReader.readAsDataURL(watermarkFile);\n\n        watermarkImage.onload = () => {\n          const watermarkWidth = watermarkImage.width;\n          const watermarkHeight = watermarkImage.height;\n          const imageWidth = image.width;\n          const imageHeight = image.height;\n\n          canvas.width = imageWidth;\n          canvas.height = imageHeight;\n          ctx.drawImage(image, 0, 0);\n\n          // Calculate watermark position\n          const x = (imageWidth - watermarkWidth) / 2;\n          const y = (imageHeight - watermarkHeight) / 2;\n\n          ctx.drawImage(watermarkImage, x, y, watermarkWidth, watermarkHeight);\n          const watermarkedDataUrl = canvas.toDataURL();\n          resolve(watermarkedDataUrl);\n        };\n      };\n    });\n  };\n\n  // Process all images\n  const handleWatermarkImages = async () => {\n    if (!watermark) return;\n\n    const watermarkedDataUrls = [];\n    for (const imageFile of images) {\n      const watermarkedImage = await applyWatermark(imageFile, watermark);\n      watermarkedDataUrls.push(watermarkedImage);\n    }\n    setWatermarkedImages(watermarkedDataUrls);\n  };\n\n  // Download all watermarked images\n  const handleDownloadAll = () => {\n    const zip = new JSZip();\n    watermarkedImages.forEach((dataUrl, index) => {\n      zip.file(`watermarked_image_${index + 1}.png`, dataUrl.split(',')[1], { base64: true });\n    });\n\n    zip.generateAsync({ type: 'blob' }).then((content) => {\n      saveAs(content, 'watermarked_images.zip');\n    });\n  };\n\n  return (\n    <Container>\n      <Typography variant=\"h4\" gutterBottom align=\"center\">\n        Watermark Photo Editor\n      </Typography>\n      \n      <Box display=\"flex\" justifyContent=\"center\" mb={2}>\n        <Input\n          type=\"file\"\n          accept=\"image/*\"\n          inputProps={{ multiple: true }}\n          onChange={handleImageUpload}\n        />\n      </Box>\n\n      <Box display=\"flex\" justifyContent=\"center\" mb={2}>\n        <Input\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={handleWatermarkUpload}\n        />\n      </Box>\n\n      <Grid container spacing={2} justifyContent=\"center\">\n        {images.map((file, index) => (\n          <Grid item key={index}>\n            <Paper>\n              <img\n                src={URL.createObjectURL(file)}\n                alt={`Image ${index + 1}`}\n                width={150}\n                height={150}\n              />\n            </Paper>\n          </Grid>\n        ))}\n      </Grid>\n\n      <Box display=\"flex\" justifyContent=\"center\" mt={2}>\n        <Button variant=\"contained\" onClick={handleWatermarkImages} disabled={!watermark || images.length === 0}>\n          Apply Watermark\n        </Button>\n      </Box>\n\n      {watermarkedImages.length > 0 && (\n        <Box display=\"flex\" justifyContent=\"center\" mt={2}>\n          <Button variant=\"contained\" onClick={handleDownloadAll}>\n            Download All Watermarked Images\n          </Button>\n        </Box>\n      )}\n\n      <Grid container spacing={2} justifyContent=\"center\" mt={3}>\n        {watermarkedImages.map((imageUrl, index) => (\n          <Grid item key={index}>\n            <Paper>\n              <img src={imageUrl} alt={`Watermarked Image ${index + 1}`} width={150} height={150} />\n            </Paper>\n          </Grid>\n        ))}\n      </Grid>\n    </Container>\n  );\n};\n\nexport default HomePage;\n"],"names":[],"mappings":"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","debugId":null}}]
}